/**!
 * Easy Select v4.0.0
 * @author phucbm
 * @homepage https://github.com/viivue/easy-select
 * @license MIT 2022
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("EasySelect",[],t):"object"==typeof exports?exports.EasySelect=t():e.EasySelect=t()}(this,(()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function s(e,t){return t.parentNode.insertBefore(e,t.nextSibling),e}function i(e){return t=e,"undefined"!=typeof jQuery&&t instanceof jQuery?e.get()[0]:"string"==typeof e?document.querySelector(e):e;var t}function n(e){return e.value=e.selectTag.value,e.value}function o(e){const t=[];return e.selectTag.querySelectorAll("option").forEach((s=>{t.push(a(e,s))})),t}function a(e,t){var s;void 0===t&&(t=(s=e.selectTag).options[s.selectedIndex]);const i=t.innerText,o=t.value,a=(r=t,Array.prototype.findIndex.call(r.parentElement.children,(e=>e===r)));var r;const c=t;return{id:function(e=""){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}(o)+"-"+a,label:i,value:o,isSelected:o===n(e),isDisabled:t.disabled,index:a,el:c}}function r(e){e.dropdown=e.wrapper.querySelector(`.${e.classes.dropdown}`),e.dropdown&&e.dropdown.detach(),e.wrapper.insertAdjacentHTML("beforeend",function(e){let t="";t+=`<div class="${e.classes.dropdown}">`,t+="<ul>";for(const s of e.selectTagData)t+="<li>",t+=c(e,s),t+="</li>";return t+="</ul>",t+="</div>",t}(e)),e.dropdown=e.wrapper.querySelector(`.${e.classes.dropdown}`),e.dropdown?e.dropdown.querySelectorAll(`[${e.atts.optionAttr}]`).forEach((t=>{t.addEventListener("click",(s=>{e.update(t.getAttribute(e.atts.optionAttr))}))})):console.error("Dropdown not found!")}function c(e,t){const s=void 0!==t&&t.value===n(e);void 0===t&&(t=a(e));let i=e.classes.option;i+=" "+(s?e.classes.active:""),i+=" "+(t.isDisabled?e.classes.optionDisabled:"");let o="";return o+=`<div class="${i}" ${e.atts.optionAttr}="${t.value}">`,o+=function(e,t){let s=e.config.customDropDownOptionHTML(t);void 0===s&&(s=`<span>${t.label}</span>`);return s}(e,t),o+="</div>",o}function l(e){e.config.beforeInit(e),function(e){let t=e.selectTag.closest(`.${e.classes.wrapper}`);if(t&&t.length)return;e.id=function(e=""){return e+(+new Date).toString(16)+(1e8*Math.random()|0).toString(16)}(),t=function({tag:e="div",className:t=""}){const s=document.createElement(e);return t.split(" ").forEach((e=>{e.length&&s.classList.add(e)})),s}({className:`${e.classes.wrapper} ${e.config.wrapper}`}),t.setAttribute(e.atts.wrapperID,e.id),e.isWrapped?function(e,t){const i=s(t,e);i.innerHTML=e.outerHTML,e.remove()}(e.selectTag,t):s(t,e.selectTag);if(e.wrapper=t,e.wrapper.insertAdjacentHTML("beforeend",function(e){let t="";return t+=`<div class="${e.classes.current}">`,t+=c(e),t+="</div>",t}(e)),e.config.nativeSelect)return e.wrapper.classList.add(e.classes.nativeSelect),void d(e);r(e),d(e),e.selectTag.style.display="none",e.current.addEventListener("click",(()=>e.toggle())),document.addEventListener("click",(t=>{null===t.target.closest(`.easy-select[${e.atts.wrapperID}="${e.id}"]`)&&e.isOpen&&e.close()}))}(e),e.config.onInit(e)}function d(e){!function(e){e.selectTag=e.wrapper.querySelector("select"),e.current=e.wrapper.querySelector(`.${e.classes.current}`)}(e),e.selectTag.addEventListener("change",(t=>{e.change(e,void 0!==t.originalEvent?"originalEvent":"easySelectEvent")}))}e.r(t);const p={wrapper:"easy-select",dropdownOpen:"show-dropdown",current:"easy-select-current",dropdown:"easy-select-dropdown",option:"easy-select-option",active:"active",optionDisabled:"disabled",nativeSelect:"easy-select-native",wrapperDisabled:"easy-select-disabled",enabled:"easy-select-enabled"},h={init:"data-easy-select",wrapperID:"data-easy-select-id",optionAttr:"data-easy-select-option"},u={wrapper:"",nativeSelect:!1,warning:!1,wrapDefaultSelect:!0,customDropDownOptionHTML:e=>{},beforeInit:e=>{},onInit:e=>{},onRefresh:e=>{},onChange:(e,t)=>{},onDestroy:e=>{},onDisabled:e=>{},onDropdownOpen:e=>{},onDropdownClose:e=>{},onDropdownToggle:e=>{}};class f{constructor(e,t){console.log("----- START"),this.classes={...p},this.atts={...h},this.selectTag=i(e),this.selectTag.classList.contains(this.classes.enabled)||(console.log("select tag",this.selectTag),this.config={...u,...t},this.isOpen=!1,this.isDisabled=!1,this.value=n(this),this.isWrapped=this.config.wrapDefaultSelect&&!this.config.nativeSelect,this.selectTagData=o(this),this.config.nativeSelect&&this.config.wrapDefaultSelect&&(this.isWrapped=!0),l(this),this.selectTag.classList.add(this.classes.enabled))}execPublicMethods(e,t){if("string"==typeof e)switch(e){case"destroy":this.destroy();break;case"refresh":this.refresh();break;case"open":this.open();break;case"close":this.close();break;case"toggle":this.toggle();break;case"disabled":this.disabled(t);break;case"select":this.update(t)}}refresh(){this.selectTagData=o(this),this.current.html(c(this)),this.config.nativeSelect||r(this),this.config.onRefresh(this)}destroy(){this.config.nativeSelect||this.dropdown.detach(),this.isWrapped?(this.current.detach(),this.selectTag.unwrap()):this.wrapper.detach(),this.selectTag.show(),this.config.onDestroy(this)}update(e){e!==n(this)?void 0!==function(e,t,s){return e.find((e=>e[t]===s))}(this.selectTagData,"value",e)?(this.selectTag.value=e,this.selectTag.dispatchEvent(new Event("change",{bubbles:!0}))):this.config.warning&&console.warn(`Option[value="${e}"] is not found in this select!`):this.close()}change(e="easySelectEvent"){this.current.innerHTML=c(this),this.config.nativeSelect||(this.dropdown.querySelectorAll(`[${this.atts.optionAttr}]`).forEach((e=>{e.classList.remove(this.classes.active)})),this.dropdown.querySelector(`[${this.atts.optionAttr}="${n(this)}"]`).classList.add(this.classes.active),this.close()),this.config.onChange(this,e)}open(){this.config.nativeSelect||this.isOpen||(this.isOpen=!0,this.wrapper.classList.add(this.classes.dropdownOpen),this.config.onDropdownOpen(this))}close(){this.config.nativeSelect||this.isOpen&&(this.isOpen=!1,this.wrapper.classList.remove(this.classes.dropdownOpen),this.config.onDropdownClose(this))}toggle(){this.config.nativeSelect||(this.isOpen?this.close():this.open(),this.config.onDropdownToggle(this))}disabled(e=!0){this.selectTag.prop("disabled",e),this.isDisabled=e,e?this.wrapper.classList.add(this.classes.wrapperDisabled):this.wrapper.classList.remove(this.classes.wrapperDisabled),this.config.onDisabled(this)}}"undefined"!=typeof jQuery&&(jQuery.fn.easySelect=function(e,t){return this.each((function(){const s=this;let i="";if(s.hasAttribute("data-easy-select-id"))i=s.getAttribute("data-easy-select-id");else{const e=s.closest("[data-easy-select-id]");i=e?e.getAttribute("data-easy-select-id"):i}if(i){window.EasySelect.get(i).execPublicMethods(e,t)}else window.EasySelect.init(s,e)}))});return window.EasySelectController=new class{constructor(){this.instances=[]}add(e){this.instances.push(e)}get(e){return this.instances.filter((t=>t.id===e))[0]}},window.EasySelect={init:(e,t={})=>{void 0!==e?window.EasySelectController.add(new f(e,t)):document.querySelectorAll(`[${h.init}]:not(.${p.enabled})`).forEach((e=>{window.EasySelectController.add(new f(e,t))}))},get:e=>window.EasySelectController.get(e)},window.EasySelect.init(),t})()));