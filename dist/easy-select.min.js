/**!
 * Easy Select v4.0.1
 * @author phucbm
 * @homepage https://github.com/viivue/easy-select
 * @license MIT 2022
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s=t();for(var i in s)("object"==typeof exports?exports:e)[i]=s[i]}}(this,(()=>(()=>{"use strict";var e={r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function s(e,t){return t.parentNode.insertBefore(e,t.nextSibling),e}function i(e){return t=e,"undefined"!=typeof jQuery&&t instanceof jQuery?e.get()[0]:"string"==typeof e?document.querySelector(e):e;var t}function n(e){return"string"==typeof e&&0===e.length}function o(e){try{return JSON.parse(e)&&!!e}catch(e){return!1}}function a(e){return e.value=e.selectTag.value,e.value}function r(e){const t=[];return e.selectTag.querySelectorAll("option").forEach((s=>{t.push(l(e,s))})),t}function l(e,t){var s;void 0===t&&(t=(s=e.selectTag).options[s.selectedIndex]);const i=t.innerText,n=t.value,o=(r=t,Array.prototype.findIndex.call(r.parentElement.children,(e=>e===r)));var r;const l=t;return{id:function(e=""){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}(n)+"-"+o,label:i,value:n,isSelected:n===a(e),isDisabled:t.disabled,index:o,el:l}}function c(e){e.dropdown=e.wrapper.querySelector(`.${e.classes.dropdown}`),e.dropdown&&e.dropdown.remove(),e.wrapper.insertAdjacentHTML("beforeend",function(e){let t="";t+=`<div class="${e.classes.dropdown}">`,t+="<ul>";for(const s of e.selectTagData)t+="<li>",t+=d(e,s),t+="</li>";return t+="</ul>",t+="</div>",t}(e)),e.dropdown=e.wrapper.querySelector(`.${e.classes.dropdown}`),e.dropdown?e.dropdown.querySelectorAll(`[${e.atts.optionAttr}]`).forEach((t=>{t.addEventListener("click",(()=>{const s=t.getAttribute(e.atts.optionAttr);e.selectTagData.filter((e=>e.value===s))[0].isDisabled||e.select(s)}))})):console.error("Dropdown not found!")}function d(e,t){const s=void 0!==t&&t.value===a(e);void 0===t&&(t=l(e));let i=e.classes.option;i+=" "+(s?e.classes.active:""),i+=" "+(t.isDisabled?e.classes.disabled:"");let n="";return n+=`<div class="${i}" ${e.atts.optionAttr}="${t.value}">`,n+=function(e,t){let s=e.config.customDropDownOptionHTML(t);void 0===s&&(s=`<span>${t.label}</span>`);return s}(e,t),n+="</div>",n}function h(e){e.config.beforeInit(p(e,"beforeInit")),function(e){let t=e.selectTag.closest(`.${e.classes.wrapper}`);if(t&&t.length)return;let i=e.classes.wrapper;i+=e.isDisabled?" "+e.classes.disabled:"",t=function({tag:e="div",className:t=""}){const s=document.createElement(e);return t.split(" ").forEach((e=>{e.length&&s.classList.add(e)})),s}({className:i}),t.setAttribute(e.atts.wrapperID,e.id),e.isWrapped?function(e,t){const i=s(t,e);i.innerHTML=e.outerHTML,e.remove()}(e.selectTag,t):s(t,e.selectTag);if(e.wrapper=t,e.wrapper.insertAdjacentHTML("beforeend",function(e){let t="";return t+=`<div class="${e.classes.current}">`,t+=d(e),t+="</div>",t}(e)),e.config.nativeSelect)return e.wrapper.classList.add(e.classes.nativeSelect),void u(e);c(e),u(e),e.selectTag.style.display="none",e.current.addEventListener("click",(()=>e.toggle()))}(e),function(e){if(e.config.nativeSelect)return;e.config.align.split(" ").forEach((t=>{"left"!==t&&e.wrapper.classList.add(`es-align-${t}`)}))}(e),e.selectTag.setAttribute(e.atts.value,a(e)),e.config.onInit(p(e,"onInit"))}function p(e,t,s){return{instance:e,eventName:t,...s}}function u(e){!function(e){e.selectTag=e.wrapper.querySelector("select"),e.current=e.wrapper.querySelector(`.${e.classes.current}`)}(e),e.selectTag.addEventListener("change",(t=>{e.change(e,void 0!==t.originalEvent?"originalEvent":"easySelectEvent")}))}e.r(t);const f={wrapper:"easy-select",dropdownOpen:"es-dropdown-open",current:"es-current",dropdown:"es-dropdown",option:"es-option",active:"es-active",disabled:"es-disabled",nativeSelect:"es-native",enabled:"es-enabled",ignore:"es-ignore"},g={init:"data-easy-select",wrapperID:"data-es-id",optionAttr:"data-es-option",value:"data-es-value"},w={id:function(e=""){return e+(+new Date).toString(16)+(1e8*Math.random()|0).toString(16)}("es-"),nativeSelect:!1,warning:!0,log:!0,wrapDefaultSelect:!0,closeOnChange:!0,align:"left",customDropDownOptionHTML:e=>{},beforeInit:e=>{},onInit:e=>{},onRefresh:e=>{},onChange:e=>{},onDestroy:e=>{},onDisable:e=>{},onEnable:e=>{},onOpen:e=>{},onClose:e=>{},onToggle:e=>{},onAdded:e=>{}};class v{constructor(e,t){this.classes={...f},this.atts={...g},this.selectTag=i(e),this.originalSelectTag=this.selectTag,this.selectTag.classList.contains(this.classes.enabled)||(this.config=function(e,t){let s=e.selectTag.getAttribute(e.atts.init);o(s)&&(t={...t,...JSON.parse(s)});for(const[e,s]of Object.entries(t))"false"===s&&(t[e]=!1),"true"===s&&(t[e]=!0);return t}(this,{...w,...t}),this.id=function(e){let t=e.selectTag.getAttribute(e.atts.init);return o(t)?e.config.id:(t=null===t||n(t)?e.selectTag.id:t,t=null===t||n(t)?e.config.id:t,t)}(this),this.wrapper=this.selectTag.parentElement,this.dropdown=this.wrapper.querySelector(`.${this.classes.dropdown}`),this.current=this.wrapper.querySelector(`.${this.classes.current}`),this.isOpen=!1,this.isDisabled=this.selectTag.disabled,this.value=a(this),this.isWrapped=this.config.wrapDefaultSelect&&!this.config.nativeSelect,this.selectTagData=r(this),this.config.nativeSelect&&this.config.wrapDefaultSelect&&(this.isWrapped=!0),h(this),this.selectTag.classList.add(this.classes.enabled))}execPublicMethods(e,t){if("string"==typeof e)switch(e){case"destroy":this.destroy();break;case"refresh":this.refresh();break;case"open":this.open();break;case"close":this.close();break;case"toggle":this.toggle();break;case"disabled":this.disable(t);break;case"select":this.select(t)}}refresh(){this.isDisabled||(this.selectTagData=r(this),this.current.innerHTML=d(this),this.config.nativeSelect||c(this),this.config.onRefresh(p(this,"onRefresh")))}destroy(){this.isDisabled||(this.wrapper.replaceWith(this.originalSelectTag),window.EasySelectController.remove(this.id),this.config.onDestroy(p(this,"onDestroy")))}select(e){if(!this.isDisabled&&e!==a(this))return void 0!==function(e,t,s){return e.find((e=>e[t]===s))}(this.selectTagData,"value",e)?(this.selectTag.value=e,void this.selectTag.dispatchEvent(new Event("change",{bubbles:!0}))):void(this.config.warning&&console.warn(`Option[value="${e}"] is not found in this select!`))}change(e="easySelectEvent"){this.isDisabled||(this.current.innerHTML=d(this),this.config.nativeSelect||(this.dropdown.querySelectorAll(`[${this.atts.optionAttr}]`).forEach((e=>{e.classList.remove(this.classes.active)})),this.dropdown.querySelector(`[${this.atts.optionAttr}="${a(this)}"]`).classList.add(this.classes.active),this.config.closeOnChange&&this.close()),this.selectTag.setAttribute(this.atts.value,a(this)),this.config.onChange(p(this,"onChange",{type:e})))}open(){this.isDisabled||this.config.nativeSelect||this.isOpen||(window.EasySelectController.closeAll(),this.isOpen=!0,this.wrapper.classList.add(this.classes.dropdownOpen),this.config.onOpen(p(this,"onOpen")))}close(){this.isDisabled||this.config.nativeSelect||this.isOpen&&(this.isOpen=!1,this.wrapper.classList.remove(this.classes.dropdownOpen),this.config.onClose(p(this,"onClose")))}toggle(){this.isDisabled||this.config.nativeSelect||(this.config.onToggle(p(this,"onToggle",{isOpen:!this.isOpen})),this.isOpen?this.close():this.open())}disable(e=!0){this.selectTag.disabled=e,this.isDisabled=e,e?(this.wrapper.classList.add(this.classes.disabled),this.config.onDisable(p(this,"onDisable"))):(this.wrapper.classList.remove(this.classes.disabled),this.config.onEnable(p(this,"onEnable")))}enable(){this.disable(!1)}add(e){return!this.isDisabled&&(this.selectTagData.filter((t=>t.value===e)).length>0?(this.config.warning&&console.warn(`[ES] ${e} will not be added due to duplicating`),!1):(this.selectTag.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`),this.refresh(),this.config.onAdded(p(this,"onAdded",{newValue:e})),this))}}"undefined"!=typeof jQuery&&(jQuery.fn.easySelect=function(e,t){return this.each((function(){const s=this;let i="";if(s.hasAttribute(g.wrapperID))i=s.getAttribute(g.wrapperID);else{const e=s.closest("[data-easy-select-id]");i=e?e.getAttribute(g.wrapperID):i}i?window.EasySelect.get(i).execPublicMethods(e,t):window.EasySelect.init(s,e)}))});return window.EasySelectController=new class{constructor(){this.instances=[]}closeAll(){this.instances.filter((e=>e.isOpen)).forEach((e=>e.close()))}add(e){this.instances.push(e)}remove(e){const t=this.instances.map((e=>e.id)).indexOf(e);this.instances.splice(t,1)}get(e){return this.instances.filter((t=>t.id===e))[0]}},window.EasySelect={init:(e,t={})=>{void 0!==e?"string"!=typeof e?void 0===e.forEach?window.EasySelectController.add(new v(e,t)):e.forEach((e=>{window.EasySelectController.add(new v(e,t))})):document.querySelectorAll(e).forEach((e=>{window.EasySelectController.add(new v(e,t))})):document.querySelectorAll(`[${g.init}]:not(.${f.enabled})`).forEach((e=>{window.EasySelectController.add(new v(e,t))}))},get:e=>window.EasySelectController.get(e)},window.EasySelect.init(),document.addEventListener("click",(e=>{e.target.closest(`[${g.wrapperID}]`)||e.target.closest(`.${f.ignore}`)||window.EasySelectController.closeAll()})),t})()));